NEW: <ConditionalWorkSequence:7 (4)>
   : │  id: 7
   : │  call count: 0
   : │  EVENT: startup
   : └1╴... done.
EVENT: startup
END: startup
0 Yes!
0 Yes!
0 Set to ONE
NEW: <ConditionalWorkSequence:8 (4)>
   : │  id: 8
   : │  call count: 0
   : │  EVENT: state¦-¦one¦foo¦bar
   : └1╴... done.
EVENT: state¦-¦one¦foo¦bar
END: state¦-¦one¦foo¦bar
0 Set to TWO
NEW: <ConditionalWorkSequence:9 (4)>
   : │  id: 9
   : │  call count: 0
   : │  EVENT: state¦one¦two¦foo¦bar
   : └1╴... done.
EVENT: state¦one¦two¦foo¦bar
END: state¦one¦two¦foo¦bar
0 Create OnEvtHandler: state¦*¦three¦foo¦bar
0 NewHandler 10
0 Set to THREE
NEW: <ConditionalWorkSequence:11 (5)>
   : │  id: 11
   : │  call count: 0
   : │  EVENT: state¦two¦three¦foo¦bar
   : ├1╴on state * three foo bar ‹OnEventHandler›
   : │  prio: 51
   : │  step: log TRACE Set to FOUR ‹LogHandler›
   : │  step: try ‹TryStatement›
   : │      : step: set state four foo bar ‹SetStateHandler›
   : │      : step: log DEBUG No! (No shit happened.) ‹LogHandler›
   : └2╴... done.
EVENT: state¦two¦three¦foo¦bar
RUN: on state * three foo bar ‹OnEventHandler›
   : prio: 51
   : step: log TRACE Set to FOUR ‹LogHandler›
   : step: try ‹TryStatement›
   :     : step: set state four foo bar ‹SetStateHandler›
   :     : step: log DEBUG No! (No shit happened.) ‹LogHandler›
 at: <ConditionalWorkSequence:11 (5)> (step 1)
 ev: EVENT: state¦two¦three¦foo¦bar
0 Set to FOUR
1 Yes! (Shit happens.)
END: state¦two¦three¦foo¦bar
0 Create OnEvtHandler: state¦*¦twohalf¦foo¦bar
0 NewHandler 12
0 Set to TWOHALF
NEW: <ConditionalWorkSequence:13 (5)>
   : │  id: 13
   : │  call count: 0
   : │  EVENT: state¦three¦twohalf¦foo¦bar
   : ├1╴on state * twohalf foo bar ‹OnEventHandler›
   : │  prio: 51
   : │  step: log TRACE Set to FOUR ‹LogHandler›
   : │  step: set state fourtoo foo bar ‹SetStateHandler›
   : └2╴... done.
EVENT: state¦three¦twohalf¦foo¦bar
RUN: on state * twohalf foo bar ‹OnEventHandler›
   : prio: 51
   : step: log TRACE Set to FOUR ‹LogHandler›
   : step: set state fourtoo foo bar ‹SetStateHandler›
 at: <ConditionalWorkSequence:13 (5)> (step 1)
 ev: EVENT: state¦three¦twohalf¦foo¦bar
0 Set to FOUR
END: state¦three¦twohalf¦foo¦bar
Traceback (most recent call last):
  File "../modules/state.py", line 255, in run
    process_event(Event(self.ctx,"state",old,value,*s.name))
  File "/daten/src/git/homevent/homevent/run.py", line 116, in process_event
    collect_event(e).process(event=e)
  File "/daten/src/git/homevent/homevent/worker.py", line 194, in process
    self._process()
  File "/daten/src/git/homevent/homevent/worker.py", line 256, in _process
    reraise(res)
  File "/daten/src/git/homevent/homevent/worker.py", line 226, in _process
    r = w.process(event=self.event, queue=self)
  File "../modules/on_event.py", line 169, in process
    return self.parent.process(**k)
  File "../modules/on_event.py", line 248, in process
    return super(OnEventHandler,self).run(ctx)
  File "/daten/src/git/homevent/homevent/statement.py", line 311, in run
    res = proc.run(ctx)
  File "../modules/state.py", line 248, in run
    raise StateChangeError(s,value)
StateChangeError: Trying to change state to 'fourtoo' while changing from 'three' to 'twohalf'
NEW: <WorkSequence:14 (4)>
   : │  id: 14
   : │  call count: 0
   : │  Trying to change state to 'fourtoo' while changing from 'three' to 'twohalf'
   : └1╴... done.
Traceback (most recent call last):
  File "../modules/state.py", line 255, in run
    process_event(Event(self.ctx,"state",old,value,*s.name))
  File "/daten/src/git/homevent/homevent/run.py", line 116, in process_event
    collect_event(e).process(event=e)
  File "/daten/src/git/homevent/homevent/worker.py", line 194, in process
    self._process()
  File "/daten/src/git/homevent/homevent/worker.py", line 256, in _process
    reraise(res)
  File "/daten/src/git/homevent/homevent/worker.py", line 226, in _process
    r = w.process(event=self.event, queue=self)
  File "../modules/on_event.py", line 169, in process
    return self.parent.process(**k)
  File "../modules/on_event.py", line 248, in process
    return super(OnEventHandler,self).run(ctx)
  File "/daten/src/git/homevent/homevent/statement.py", line 311, in run
    res = proc.run(ctx)
  File "../modules/state.py", line 248, in run
    raise StateChangeError(s,value)
StateChangeError: Trying to change state to 'fourtoo' while changing from 'three' to 'twohalf'
END: StateChangeError
0 Set to THREE
NEW: <ConditionalWorkSequence:15 (5)>
   : │  id: 15
   : │  call count: 0
   : │  EVENT: state¦twohalf¦three¦foo¦bar
   : ├1╴on state * three foo bar ‹OnEventHandler›
   : │  prio: 51
   : │  step: log TRACE Set to FOUR ‹LogHandler›
   : │  step: try ‹TryStatement›
   : │      : step: set state four foo bar ‹SetStateHandler›
   : │      : step: log DEBUG No! (No shit happened.) ‹LogHandler›
   : └2╴... done.
EVENT: state¦twohalf¦three¦foo¦bar
RUN: on state * three foo bar ‹OnEventHandler›
   : prio: 51
   : step: log TRACE Set to FOUR ‹LogHandler›
   : step: try ‹TryStatement›
   :     : step: set state four foo bar ‹SetStateHandler›
   :     : step: log DEBUG No! (No shit happened.) ‹LogHandler›
 at: <ConditionalWorkSequence:15 (5)> (step 1)
 ev: EVENT: state¦twohalf¦three¦foo¦bar
0 Set to FOUR
1 Yes! (Shit happens.)
END: state¦twohalf¦three¦foo¦bar
NEW: <ConditionalWorkSequence:16 (4)>
   : │  id: 16
   : │  call count: 0
   : │  EVENT: wait¦start¦0.1¦_wait¦1
   : └1╴... done.
EVENT: wait¦start¦0.1¦_wait¦1
END: wait¦start¦0.1¦_wait¦1
NEW: <ConditionalWorkSequence:17 (4)>
   : │  id: 17
   : │  call count: 0
   : │  EVENT: wait¦done¦0.1¦_wait¦1
   : └1╴... done.
EVENT: wait¦done¦0.1¦_wait¦1
END: wait¦done¦0.1¦_wait¦1
foo bar :: three — now
.
: ‹Collected State:foo¦bar›
name: foo¦bar
value: three
lock: No
last value: twohalf
last change: now
.
0 Yes!
0 Yes!
0 Yes!
0 Create OnEvtHandler: whatever
0 NewHandler 18
NEW: <ConditionalWorkSequence:19 (4)>
   : │  id: 19
   : │  call count: 0
   : │  EVENT: state¦three¦-¦foo¦bar
   : └1╴... done.
EVENT: state¦three¦-¦foo¦bar
END: state¦three¦-¦foo¦bar
.
NEW: <ConditionalWorkSequence:20 (5)>
   : │  id: 20
   : │  call count: 0
   : │  IEVENT: whatever
   : ├1╴on whatever ‹OnEventHandler›
   : │  prio: 51
   : │  step: var state x foo bar ‹VarStateHandler›
   : │  step: log TRACE We got $x ‹LogHandler›
   : └2╴... done.
IEVENT: whatever
RUN: on whatever ‹OnEventHandler›
   : prio: 51
   : step: var state x foo bar ‹VarStateHandler›
   : step: log TRACE We got $x ‹LogHandler›
 at: <ConditionalWorkSequence:20 (5)> (step 1)
 ev: IEVENT: whatever
END: whatever
Traceback (most recent call last):
  File "/daten/src/git/homevent/homevent/run.py", line 136, in run_event
    process_event(event)
  File "/daten/src/git/homevent/homevent/run.py", line 116, in process_event
    collect_event(e).process(event=e)
  File "/daten/src/git/homevent/homevent/worker.py", line 194, in process
    self._process()
  File "/daten/src/git/homevent/homevent/worker.py", line 256, in _process
    reraise(res)
  File "/daten/src/git/homevent/homevent/worker.py", line 226, in _process
    r = w.process(event=self.event, queue=self)
  File "../modules/on_event.py", line 169, in process
    return self.parent.process(**k)
  File "../modules/on_event.py", line 248, in process
    return super(OnEventHandler,self).run(ctx)
  File "/daten/src/git/homevent/homevent/statement.py", line 311, in run
    res = proc.run(ctx)
  File "../modules/state.py", line 296, in run
    s = States[name]
KeyError: Name(u'foo', u'bar')
NEW: <WorkSequence:21 (4)>
   : │  id: 21
   : │  call count: 0
   : │  Name(u'foo', u'bar')
   : └1╴... done.
Traceback (most recent call last):
  File "/daten/src/git/homevent/homevent/run.py", line 136, in run_event
    process_event(event)
  File "/daten/src/git/homevent/homevent/run.py", line 116, in process_event
    collect_event(e).process(event=e)
  File "/daten/src/git/homevent/homevent/worker.py", line 194, in process
    self._process()
  File "/daten/src/git/homevent/homevent/worker.py", line 256, in _process
    reraise(res)
  File "/daten/src/git/homevent/homevent/worker.py", line 226, in _process
    r = w.process(event=self.event, queue=self)
  File "../modules/on_event.py", line 169, in process
    return self.parent.process(**k)
  File "../modules/on_event.py", line 248, in process
    return super(OnEventHandler,self).run(ctx)
  File "/daten/src/git/homevent/homevent/statement.py", line 311, in run
    res = proc.run(ctx)
  File "../modules/state.py", line 296, in run
    s = States[name]
KeyError: Name(u'foo', u'bar')
END: KeyError
NEW: <ConditionalWorkSequence:22 (6)>
   : │  id: 22
   : │  call count: 0
   : │  EVENT: shutdown
   : └1╴... done.
EVENT: shutdown
END: shutdown
